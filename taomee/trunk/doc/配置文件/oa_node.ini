[log]
log_count=8
log_dir=../log
log_lvl=7
log_prefix=oa_node_
log_size=32000000

[node_info]
server_tag=e9c230f8
listen_ip=10.1.1.63
host_dmax=0
update_interval=62
listen_port=55000
recv_udp=yes
heartbeat_interval=20
cluster_name=mole_db
update_url=http://10.1.1.63/oa-auto-update/index.php
parent_ip=10.1.1.63
export_thread_num=1
send_addr_num=1
so_num=2
mysql_master_num=1
mysql_slave_num=0
collect_group_num=27

[send_addr]
send_ip1=10.1.1.63
send_port1=55000

[so_name]
so_name_1=libcommonproto.so
so_name_2=libmysqlmaster.so

[mysql_master]
instance_port1=3306
instance_sock1=/var/run/mysqld/mysqld.sock

[group1]
group_name=system
collect_interval=0
time_threshold=1200
metric_num=10
name1=boottime
type1=1
title1=启动时间
value_threshold1=1
arg1=
formula1=;;GE;0;0;2
name2=cpu_info
type2=1
title2=
value_threshold2=0
arg2=
formula2=;;GE;0;0;2
name3=cpu_num
type3=1
title3=CPU Count
value_threshold3=0
arg3=
formula3=10;10;GE;0;0;2
name4=cpu_speed
type4=1
title4=CPU Speed
value_threshold4=0
arg4=
formula4=10;10;GE;0;0;2
name5=inside_ip
type5=1
title5=inside ip
value_threshold5=0
arg5=
formula5=0;0;GE;0;0;2
name6=mem_total
type6=1
title6=Memory Total
value_threshold6=0
arg6=
formula6=10;10;GE;0;0;2
name7=os_name
type7=1
title7=Operating System
value_threshold7=0
arg7=
formula7=10;10;GE;0;0;2
name8=os_release
type8=1
title8=Operating System Release
value_threshold8=0
arg8=
formula8=10;10;GE;0;0;2
name9=os_version
type9=1
title9=os version
value_threshold9=0
arg9=
formula9=;;GE;0;0;2
name10=outside_ip
type10=1
title10=outside ip
value_threshold10=0
arg10=
formula10=;;GE;0;0;2

[group2]
group_name=cpu
collect_interval=90
time_threshold=30
metric_num=8
name1=cpu_aidle
type1=1
title1=CPU aidle
value_threshold1=1
arg1=
formula1=555+$bytes_out;6666;GT;180;90;2
name2=cpu_idle
type2=3
title2=
value_threshold2=1
arg2=
formula2=10;10;LE;180;90;2
name3=cpu_intr
type3=1
title3=cpu intr
value_threshold3=1
arg3=
formula3=2;2;GE;180;90;2
name4=cpu_nice
type4=1
title4=CPU Nice
value_threshold4=1
arg4=
formula4=10;10;GE;180;90;2
name5=cpu_sintr
type5=3
title5=CPU Sintr
value_threshold5=1
arg5=
formula5=4;4;GE;180;90;2
name6=cpu_system
type6=1
title6=CPU        System
value_threshold6=1
arg6=
formula6=10;10;GE;180;90;2
name7=cpu_user
type7=3
title7=CPU User Of Node
value_threshold7=1
arg7=
formula7=20;40;GE;180;90;2
name8=cpu_wio
type8=3
title8=CPU wio
value_threshold8=1
arg8=
formula8=20;40;GE;180;90;2

[group3]
group_name=load
collect_interval=90
time_threshold=30
metric_num=3
name1=load_fifteen
type1=1
title1=Fifteen Minute Load Average
value_threshold1=0
arg1=
formula1=10;10;GE;180;90;2
name2=load_five
type2=1
title2=Five Minute Load Average
value_threshold2=1
arg2=
formula2=10;10;GE;180;90;2
name3=load_one
type3=1
title3=One Minute Load Average
value_threshold3=1
arg3=
formula3=10;10;GE;180;90;2

[group4]
group_name=proc
collect_interval=950
time_threshold=80
metric_num=2
name1=proc_run
type1=1
title1=Total Running Processes
value_threshold1=1
arg1=
formula1=10;10;GE;1900;950;2
name2=proc_total
type2=1
title2=Total Processes
value_threshold2=1
arg2=
formula2=10;10;GE;1900;950;2

[group5]
group_name=memory
collect_interval=40
time_threshold=180
metric_num=4
name1=mem_buffers
type1=1
title1=
value_threshold1=1024
arg1=
formula1=1024;1024;LE;80;40;2
name2=mem_cached
type2=1
title2=Cached Memory
value_threshold2=1024
arg2=
formula2=1024;1024;LE;80;40;2
name3=mem_free
type3=3
title3=
value_threshold3=1024
arg3=
formula3=$mem_total*0.4;$mem_total*0.2;LT;80;40;2
name4=swap_free
type4=3
title4=Free Swap Space
value_threshold4=1024
arg4=
formula4=1.024e+06;1.024e+06;LT;80;40;2

[group6]
group_name=network
collect_interval=40
time_threshold=300
metric_num=8
name1=bytes_in
type1=3
title1=
value_threshold1=1024
arg1=
formula1=2048;4096;GE;80;40;2
name2=bytes_out
type2=3
title2=
value_threshold2=1024
arg2=
formula2=32;32;GE;80;40;2
name3=eth0_recv
type3=1
title3=
value_threshold3=4096
arg3=
formula3=10;10;GE;80;40;2
name4=eth0_send
type4=1
title4=eth0 Bytes Send
value_threshold4=0
arg4=
formula4=10;10;GT;80;40;2
name5=eth1_recv
type5=1
title5=eth1 Bytes Received
value_threshold5=0
arg5=
formula5=10;10;GE;80;40;2
name6=eth1_send
type6=1
title6=eth1 Bytes  Send
value_threshold6=4096
arg6=
formula6=10;10;GE;80;40;2
name7=pkts_in
type7=1
title7=Packets Received
value_threshold7=256
arg7=
formula7=10;10;GE;80;40;2
name8=pkts_out
type8=1
title8=Packets Sent
value_threshold8=1
arg8=
formula8=10;10;GE;80;40;2

[group7]
group_name=disk_fix
collect_interval=1800
time_threshold=3600
metric_num=1
name1=disk_total
type1=1
title1=Total Disk Space
value_threshold1=1
arg1=
formula1=10;10.6667;GE;3600;1800;2

[group8]
group_name=disk_var
collect_interval=40
time_threshold=1800
metric_num=2
name1=disk_free
type1=3
title1=
value_threshold1=1
arg1=
formula1=1;1;GE;80;40;2
name2=part_max_used
type2=1
title2=Maximum Disk Space Used
value_threshold2=1
arg2=
formula2=10;10;GE;80;40;2

[group9]
group_name=mysql_binlog_cache
collect_interval=60
time_threshold=3600
metric_num=2
name1=binlog_cache_disk_use
type1=1
title1=binlog_cache_disk_use
value_threshold1=0
arg1=3306
formula1=0;0;0;120;60;2
name2=binlog_cache_use
type2=1
title2=binlog_cache_use
value_threshold2=0
arg2=3306
formula2=78+$binlog_cache_disk_use;9;GE;120;60;2

[group10]
group_name=mysql_bytes_io
collect_interval=60
time_threshold=3600
metric_num=2
name1=bytes_received
type1=3
title1=bytes_received
value_threshold1=0
arg1=3306
formula1=4096;10240;GE;120;60;2
name2=bytes_sent
type2=3
title2=bytes_sent
value_threshold2=0
arg2=3306
formula2=1;1;GE;120;60;2

[group11]
group_name=mysql_dml
collect_interval=60
time_threshold=3600
metric_num=6
name1=com_call_procedure
type1=1
title1=com_call_procedure
value_threshold1=0
arg1=3306
formula1=;;GE;120;60;2
name2=com_delete
type2=3
title2=com_delete
value_threshold2=0
arg2=3306
formula2=1;2;GE;120;60;2
name3=com_insert
type3=3
title3=com_insert
value_threshold3=0
arg3=3306
formula3=10;20;GE;120;60;2
name4=com_select
type4=3
title4=com_select
value_threshold4=0
arg4=3306
formula4=2;4;GE;120;60;2
name5=com_update
type5=1
title5=com_update
value_threshold5=0
arg5=3306
formula5=0;0;0;120;60;2
name6=questions
type6=1
title6=questions
value_threshold6=0
arg6=3306
formula6=0;0;0;120;60;2

[group12]
group_name=mysql_tmp_table
collect_interval=60
time_threshold=3600
metric_num=3
name1=created_tmp_disk_tables
type1=1
title1=created_tmp_disk_tables
value_threshold1=0
arg1=3306
formula1=0;0;0;120;60;2
name2=created_tmp_files
type2=1
title2=created_tmp_files
value_threshold2=0
arg2=3306
formula2=0;0;0;120;60;2
name3=created_tmp_tables
type3=1
title3=created_tmp_tables
value_threshold3=0
arg3=3306
formula3=0;0;0;120;60;2

[group13]
group_name=mysql_innodb_buffer_pool_pages
collect_interval=60
time_threshold=3600
metric_num=4
name1=innodb_buffer_pool_pages_data
type1=1
title1=innodb_buffer_pool_pages_data
value_threshold1=0
arg1=3306
formula1=0;0;0;120;60;2
name2=innodb_buffer_pool_pages_dirty
type2=1
title2=innodb_buffer_pool_pages_dirty
value_threshold2=0
arg2=3306
formula2=0;0;0;120;60;2
name3=innodb_buffer_pool_pages_free
type3=1
title3=innodb_buffer_pool_pages_free
value_threshold3=0
arg3=3306
formula3=0;0;0;120;60;2
name4=innodb_buffer_pool_pages_total
type4=1
title4=innodb_buffer_pool_pages_total
value_threshold4=0
arg4=3306
formula4=0;0;0;120;60;2

[group14]
group_name=mysql_innodb_data
collect_interval=60
time_threshold=3600
metric_num=4
name1=innodb_data_fsyncs
type1=1
title1=innodb_data_fsyncs
value_threshold1=0
arg1=3306
formula1=0;0;0;120;60;2
name2=innodb_data_pending_fsyncs
type2=1
title2=innodb_data_pending_fsyncs
value_threshold2=0
arg2=3306
formula2=0;0;0;120;60;2
name3=innodb_data_reads
type3=1
title3=innodb_data_reads
value_threshold3=0
arg3=3306
formula3=0;0;0;120;60;2
name4=innodb_data_writes
type4=1
title4=innodb_data_writes
value_threshold4=0
arg4=3306
formula4=0;0;0;120;60;2

[group15]
group_name=mysql_instance_alive
collect_interval=60
time_threshold=3600
metric_num=1
name1=instance_alive
type1=2
title1=instance_alive
value_threshold1=0
arg1=3306
formula1=2;2;EQ;120;60;2

[group16]
group_name=mysql_key_buffer
collect_interval=60
time_threshold=3600
metric_num=2
name1=key_buffer_read_hit_rate
type1=1
title1=key_buffer_read_hit_rate
value_threshold1=0
arg1=3306
formula1=;;GE;120;60;2
name2=key_buffer_write_hit_rate
type2=1
title2=key_buffer_write_hit_rate
value_threshold2=0
arg2=3306
formula2=;;GE;120;60;2

[group17]
group_name=mysql_table_locks
collect_interval=60
time_threshold=3600
metric_num=2
name1=table_locks_immediate
type1=1
title1=table_locks_immediate
value_threshold1=0
arg1=3306
formula1=0;0;0;120;60;2
name2=table_locks_waited
type2=1
title2=table_locks_waited
value_threshold2=0
arg2=3306
formula2=0;0;0;120;60;2

[group18]
group_name=mysql_threads
collect_interval=60
time_threshold=3600
metric_num=5
name1=slow_launch_threads
type1=1
title1=slow_launch_threads
value_threshold1=0
arg1=3306
formula1=0;0;0;120;60;2
name2=threads_cached
type2=1
title2=threads_cached
value_threshold2=0
arg2=3306
formula2=0;0;0;120;60;2
name3=threads_connected
type3=1
title3=threads_connected
value_threshold3=0
arg3=3306
formula3=0;0;0;120;60;2
name4=threads_created
type4=1
title4=threads_created
value_threshold4=0
arg4=3306
formula4=0;0;0;120;60;2
name5=threads_running
type5=1
title5=threads_running
value_threshold5=0
arg5=3306
formula5=0;0;0;120;60;2

[group19]
group_name=mysql_slow_query
collect_interval=60
time_threshold=3600
metric_num=2
name1=long_query_time
type1=3
title1=慢查询记录阀值
value_threshold1=0
arg1=3306
formula1=10;20;GE;120;60;2
name2=slow_queries
type2=1
title2=slow_queries
value_threshold2=0
arg2=3306
formula2=0;0;0;120;60;2

[group20]
group_name=mysql_open_handle
collect_interval=60
time_threshold=3600
metric_num=3
name1=open_files
type1=1
title1=open_files
value_threshold1=0
arg1=3306
formula1=0;0;0;120;60;2
name2=open_tables
type2=1
title2=open_tables
value_threshold2=0
arg2=3306
formula2=0;0;0;120;60;2
name3=slave_open_temp_tables
type3=1
title3=slave_open_temp_tables
value_threshold3=0
arg3=3306
formula3=0;0;0;120;60;2

[group21]
group_name=mysql_sort
collect_interval=60
time_threshold=3600
metric_num=3
name1=sort_range
type1=1
title1=sort_range
value_threshold1=0
arg1=3306
formula1=0;0;0;120;60;2
name2=sort_rows
type2=1
title2=sort_rows
value_threshold2=0
arg2=3306
formula2=0;0;0;120;60;2
name3=sort_scan
type3=1
title3=sort_scan
value_threshold3=0
arg3=3306
formula3=0;0;0;120;60;2

[group22]
group_name=mysql_connection
collect_interval=60
time_threshold=3600
metric_num=2
name1=max_connections
type1=1
title1=max_connections
value_threshold1=0
arg1=3306
formula1=0;0;0;120;60;2
name2=max_used_connections
type2=3
title2=max_used_connections
value_threshold2=0
arg2=3306
formula2=$max_connections*0.2;$max_connections*0.3;GE;120;60;2

[group23]
group_name=mysql_version
collect_interval=60
time_threshold=3600
metric_num=2
name1=protocol_version
type1=1
title1=protocol_version
value_threshold1=0
arg1=3306
formula1=;;GE;0;0;0
name2=version
type2=1
title2=version
value_threshold2=0
arg2=3306
formula2=;;GE;0;0;0

[group24]
group_name=mysql_uptime
collect_interval=60
time_threshold=3600
metric_num=2
name1=uptime
type1=1
title1=uptime
value_threshold1=0
arg1=3306
formula1=;;GE;0;0;0
name2=uptime_since_flush_status
type2=1
title2=uptime_since_flush_status
value_threshold2=0
arg2=3306
formula2=;;GE;0;0;0

[group25]
group_name=mysql_socket
collect_interval=60
time_threshold=3600
metric_num=1
name1=socket
type1=1
title1=socket
value_threshold1=0
arg1=3306
formula1=;;GE;0;0;0

[group26]
group_name=mysql_user_host_priv
collect_interval=60
time_threshold=3600
metric_num=3
name1=have_user_priv_host_wildcard
type1=2
title1=have_user_priv_host_wildcard
value_threshold1=0
arg1=3306
formula1=1;1;EQ;120;60;2
name2=have_user_priv_root_grant
type2=2
title2=have_user_priv_root_grant
value_threshold2=0
arg2=3306
formula2=1;1;EQ;120;60;2
name3=user_host_priv
type3=1
title3=mysql user host private
value_threshold3=0
arg3=3306
formula3=;;GE;0;0;0

[group27]
group_name=mysql_query_cache
collect_interval=60
time_threshold=3600
metric_num=3
name1=have_query_cache
type1=1
title1=have_query_cache
value_threshold1=0
arg1=3306
formula1=;;GE;0;0;0
name2=qcache_hits
type2=1
title2=qcache_hits
value_threshold2=0
arg2=3306
formula2=;;GE;0;0;0
name3=query_cache_type
type3=3
title3=query_cache_type
value_threshold3=0
arg3=3306
formula3=$qcache_hits+1;$qcache_hits+1;EQ;120;60;2


